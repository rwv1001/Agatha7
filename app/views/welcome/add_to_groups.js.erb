<% if(group_ids.length == 0) %>
    if (window.showNotification) {
      window.showNotification('<%="Add Selected Failed: You did not select any groups."%>', 'error');
    } else {
      alert('<%="Add Selected Failed: You did not select any groups."%>');
    }
<% elsif permissioned.length == 0 %>
    if (window.showNotification) {
      window.showNotification('<%="You do not have permission to add members to any of the selected groups."%>', 'error');
    } else {
      alert('<%="You do not have permission to add members to any of the selected groups."%>');
    }
<% else %>
    <% success_str = ""; %>
    <% if unpresent.length ==1 %>
        <% success_str << "#{class_name} was added to 1 group. " %>   
    <% elsif unpresent.length >1 %>
        <% success_str << "#{class_name} was added to #{unpresent.length} groups. " %>
    <% end %>
    <% if present.length == 1 %>
        <% success_str << "#{class_name} was not added to 1 group because it was already in it. "%>
    <% elsif present.length >1 %>
        <% success_str << "#{class_name} was not added to #{present.length} groups because it was already in them. " %>    
    <% end %>
    <% if wrong_types.length == 1 %>
        <% success_str << "#{class_name} was not added to 1 group because it was of the wrong type. "%>
    <% elsif wrong_types.length > 1 %>
        <% success_str << "#{class_name} was not added to #{wrong_types.length} groups because they were of the wrong type. " %>
    <% end %>
    <% if unpermissioned.length == 1 %>
        <% success_str << "#{class_name} was not added to 1 group because you did not have permission to update this group. "%>
    <% elsif unpermissioned.length >1 %>
        <% success_str << "#{class_name} was not added to #{unpermissioned.length} groups because you did not have permission to update these groups. " %>
    <% end %>
                 
    // ActionCable will handle table updates automatically
    action_select_no_js(); 
    
    if (window.showNotification) {
      window.showNotification('<%="#{success_str}"%>', 'success');
    } else {
      alert('<%="#{success_str}"%>');
    }
<% end %>
unwait();
